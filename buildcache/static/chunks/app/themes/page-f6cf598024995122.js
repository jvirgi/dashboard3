(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{33372:function(e,t,a){Promise.resolve().then(a.bind(a,42e3))},42e3:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(57437),r=a(2265),o=a(60523),s=a(49128),i=a(25536),l=a(72495),c=a(44525),d=a(16463);function m(){let e=o.m,t=(0,d.useRouter)(),{themes:a,reviews:m,dates:u}=e,[h,f]=(0,r.useState)(12),g=(0,r.useMemo)(()=>u.sort((e,t)=>e.date.getTime()-t.date.getTime()).slice(-h).map(e=>e.dateKey),[u,h]),p=(0,r.useMemo)(()=>m.filter(e=>g.includes(e.dateKey)),[m,g]),x=(0,r.useMemo)(()=>{let e=new Map;for(let t of a)e.set(t.themeId,{name:t.name,count:0,sent:0});for(let t of p)for(let a of t.themeIds){let n=e.get(a);n&&(n.count+=1,n.sent+=t.sentimentScore)}return Array.from(e.values()).map(e=>({name:e.name,volume:e.count,sentiment:e.count?Number((e.sent/e.count).toFixed(2)):0}))},[p,a]),v=(0,r.useMemo)(()=>p.slice(-20).reverse(),[p]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"rounded-2xl p-6 bg-white/60 backdrop-blur border border-slate-200 shadow-soft",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"Themes"}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-sm text-slate-600",children:"Months:"}),(0,n.jsx)(c.l,{value:h,onChange:f})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,n.jsxs)(i.O,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Theme Volume"}),(0,n.jsx)(s.f,{data:x.map(e=>({name:e.name,value:e.volume})),xKey:"name",barKey:"value",color:"#8b5cf6",onBarClick:e=>t.push("/?brand=".concat(encodeURIComponent(e)))})]}),(0,n.jsxs)(i.O,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Theme Sentiment"}),(0,n.jsx)(s.f,{data:x.map(e=>({name:e.name,value:e.sentiment})),xKey:"name",barKey:"value",color:"#10b981",onBarClick:e=>t.push("/?brand=".concat(encodeURIComponent(e)))})]})]}),(0,n.jsxs)(i.O,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Theme Composition (Treemap)"}),(0,n.jsx)(l.Z,{data:x.map(e=>({name:e.name,value:e.volume}))})]}),(0,n.jsxs)(i.O,{className:"p-4",children:[(0,n.jsx)("h3",{className:"font-semibold mb-3",children:"Recent Quotes"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:v.map(e=>(0,n.jsxs)("div",{className:"kpi",children:[(0,n.jsx)("div",{className:"text-sm text-slate-600 mb-2",children:new Date(e.dateKey+"-01").toLocaleDateString(void 0,{month:"short",year:"2-digit"})}),(0,n.jsx)("div",{className:"text-slate-800",children:e.text}),(0,n.jsxs)("div",{className:"mt-2 text-xs text-slate-500",children:["Rating: ",e.rating," â€¢ Sentiment: ",e.sentimentScore.toFixed(2)]})]},e.reviewId))})]})]})}},25536:function(e,t,a){"use strict";a.d(t,{O:function(){return o}});var n=a(57437),r=a(27398);function o(e){let{children:t,className:a=""}=e;return(0,n.jsx)(r.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.35},whileHover:{y:-2},className:"card ".concat(a),children:t})}},44525:function(e,t,a){"use strict";a.d(t,{l:function(){return r}});var n=a(57437);function r(e){let{value:t,onChange:a}=e;return(0,n.jsx)("div",{className:"inline-flex rounded-full bg-slate-100 p-1 border border-slate-200",children:[6,12,18].map(e=>(0,n.jsxs)("button",{onClick:()=>a(e),className:"px-3 py-1.5 text-sm rounded-full transition ".concat(t===e?"bg-white shadow-soft text-slate-900":"text-slate-600 hover:text-slate-900"),children:[e," mo"]},e))})}},49128:function(e,t,a){"use strict";a.d(t,{f:function(){return f}});var n=a(57437),r=a(35231),o=a(25974),s=a(54142),i=a(2842),l=a(9542),c=a(85475),d=a(20153),m=a(45745),u=a(78703);function h(e){let{active:t,payload:a,label:r}=e;if(!t||!(null==a?void 0:a.length))return null;let[o]=a;return(0,n.jsxs)("div",{className:"rounded-lg border bg-white/95 p-3 shadow-soft",children:[(0,n.jsx)("div",{className:"text-xs text-slate-500",children:r}),(0,n.jsxs)("div",{className:"mt-1",children:[null==o?void 0:o.name,": ",(0,n.jsx)("span",{className:"font-medium",children:null==o?void 0:o.value})]})]})}function f(e){let{data:t,xKey:a,barKey:f,color:g="#3b82f6",onBarClick:p}=e,x=f.replace(/^[a-z]/,e=>e.toUpperCase()),v="grad-".concat(f.replace(/[^a-z0-9]/gi,""));return(0,n.jsx)("div",{className:"h-80",children:(0,n.jsx)(r.h,{width:"100%",height:"100%",children:(0,n.jsxs)(o.v,{data:t,margin:{top:10,right:10,left:0,bottom:40},children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:v,x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:g,stopOpacity:.9}),(0,n.jsx)("stop",{offset:"100%",stopColor:g,stopOpacity:.3})]})}),(0,n.jsx)(s.q,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,n.jsx)(i.K,{dataKey:a,tick:{fontSize:12},interval:0,angle:-20,textAnchor:"end",height:50}),(0,n.jsx)(l.B,{tick:{fontSize:12}}),(0,n.jsx)(c.u,{content:(0,n.jsx)(h,{})}),(0,n.jsx)(d.D,{}),(0,n.jsx)(m.$,{dataKey:f,fill:"url(#".concat(v,")"),radius:[8,8,0,0],name:x,onClick:e=>null==p?void 0:p(null==e?void 0:e.name),cursor:p?"pointer":"default",children:(0,n.jsx)(u.e,{dataKey:f,position:"top",className:"fill-slate-600 text-[11px]"})})]})})})}},72495:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var n=a(57437),r=a(35231),o=a(75948);function s(e){let{data:t,dataKey:a="value"}=e;return(0,n.jsx)("div",{className:"h-80",children:(0,n.jsx)(r.h,{width:"100%",height:"100%",children:(0,n.jsx)(o.W,{data:t,dataKey:a,stroke:"#fff",fill:"#60a5fa",aspectRatio:4/3,animationDuration:400})})})}},60523:function(e,t,a){"use strict";let n;function r(e,t){return t[Math.floor(e()*t.length)]}function o(e,t,a){return Math.max(t,Math.min(a,e))}a.d(t,{m:function(){return I}});let s=(n=20240801,()=>(n=1103515245*n+12345>>>0)/4294967295),i=[{categoryId:"cat_beauty",name:"Beauty Care"},{categoryId:"cat_groom",name:"Grooming"},{categoryId:"cat_oral",name:"Oral Care"},{categoryId:"cat_house",name:"Household"}],l=[],c=[],d={cat_beauty:["Aurelia","Velura","Bloom\xe9","Chroma","Lustre"],cat_groom:["EdgeCraft","Stately","TrimX","UrbanMan"],cat_oral:["WhitenUp","FreshMint","EnamelPro","BrightSmile"],cat_house:["PureHome","Sparkle","CitrusWave","EcoClean"]},m=["Value","Mass","Premium"];for(let e of i)for(let t of d[e.categoryId]){let a="b_".concat(t.toLowerCase().replace(/[^a-z]/g,""));l.push({brandId:a,categoryId:e.categoryId,name:t});let n=6+Math.floor(4*s());for(let e=0;e<n;e++){let n="".concat(a,"_p").concat(e+1),r=m[Math.floor(s()*m.length)],o=["Serum","Cream","Gel","Foam","Brush","Kit","Pads","Strips","Cleanser"][e%9],i=[s()>.5?"Fragrance-free":"Fragranced",s()>.5?"Sensitive-skin":"All-skin",s()>.5?"Vegan":"Regular"];c.push({productId:n,brandId:a,name:"".concat(t," ").concat(o," ").concat(e+1),priceTier:r,attributes:i})}}let u=[{retailerId:"ret_amazon",name:"Amazon"},{retailerId:"ret_walmart",name:"Walmart"},{retailerId:"ret_target",name:"Target"},{retailerId:"ret_ulta",name:"Ulta Beauty"},{retailerId:"ret_cvs",name:"CVS Pharmacy"},{retailerId:"ret_walgreens",name:"Walgreens"}],h=(function(e){let t=[],a=new Date,n=new Date(a.getFullYear(),a.getMonth(),1);for(let e=17;e>=0;e--)t.push(new Date(n.getFullYear(),n.getMonth()-e,1));return t})(0).map(e=>{let t=e.getFullYear(),a=e.getMonth()+1;return{dateKey:"".concat(t,"-").concat(String(a).padStart(2,"0")),date:e,month:a,year:t,monthName:e.toLocaleString(void 0,{month:"short"})}}),f=[{themeId:"th_scent",name:"Scent"},{themeId:"th_texture",name:"Texture"},{themeId:"th_longevity",name:"Longevity"},{themeId:"th_value",name:"Value for Money"},{themeId:"th_packaging",name:"Packaging"},{themeId:"th_sensitivity",name:"Sensitivity"},{themeId:"th_whitening",name:"Whitening"},{themeId:"th_moisture",name:"Moisturizing"},{themeId:"th_irritation",name:"Irritation"},{themeId:"th_ease",name:"Ease of Use"}],g={cat_beauty:4.2,cat_groom:4,cat_oral:4.1,cat_house:4},p={Value:-.2,Mass:0,Premium:.2},x={ret_amazon:.5,ret_walmart:.2,ret_target:.15,ret_ulta:.07,ret_cvs:.05,ret_walgreens:.03},v={positive:["Exceeded my expectations","Absolutely love it","Great value","Works like a charm","Smells amazing","Gentle and effective","Noticeable results","Will repurchase","Highly recommend","Fantastic quality"],neutral:["Does the job","Decent for the price","Okay overall","Average performance","Nothing special"],negative:["Not worth it","Irritated my skin","Did not whiten as promised","Leaked in packaging","Too harsh","Unpleasant scent","Stopped working after a week","Poor value","Messy to use"]},y=[];c.map(e=>[e.productId,e]);let j=new Map(l.map(e=>[e.brandId,e])),b=[{region:"NA",country:["US","CA"]},{region:"EU",country:["UK","DE","FR","IT","ES"]},{region:"APAC",country:["JP","KR","AU","SG"]},{region:"LATAM",country:["BR","MX","AR","CL"]}];for(let e=0;e<6e3;e++){let t=r(s,c),a=j.get(t.brandId).categoryId,n=r(s,u),i=r(s,h);if(s()>(x[n.retailerId]||.1)+.15)continue;let l=o(g[a]+p[t.priceTier]+(s()-.5)*1,1,5),d=Math.round(l),m=o((l-1)/4+(s()-.5)*.05,0,1),I=Array.from(new Set(Array.from({length:1+Math.floor(2*s())},()=>r(s,f)).map(e=>e.themeId))),_=function(e,t,a){let n=r(e,a>=4?v.positive:a<=2?v.negative:v.neutral),o=t.length?" - ".concat(t[0].name.toLowerCase()," was a key factor."):"";return"".concat(n,".").concat(o)}(s,f.filter(e=>I.includes(e.themeId)),d),N=1+Math.floor(28*s()),w=new Date(i.year,i.month-1,N),S="".concat(w.getFullYear(),"-").concat(String(w.getMonth()+1).padStart(2,"0"),"-").concat(String(w.getDate()).padStart(2,"0")),k=r(s,b),M=r(s,k.country);y.push({reviewId:"r_".concat(e),productId:t.productId,retailerId:n.retailerId,dateKey:i.dateKey,rating:d,sentimentScore:Number(m.toFixed(3)),themeIds:I,text:_,helpfulVotes:Math.floor(20*s()),dateKeyDay:S,reviewDate:w,region:k.region,country:M})}let I={categories:i,brands:l,products:c,retailers:u,dates:h,themes:f,reviews:y}}},function(e){e.O(0,[863,948,971,23,744],function(){return e(e.s=33372)}),_N_E=e.O()}]);