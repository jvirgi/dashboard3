(()=>{var e={};e.id=277,e.ids=[277],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},51688:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(83838),s(37716),s(35866);var a=s(23191),r=s(88716),n=s(37922),o=s.n(n),i=s(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["themes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83838)),"/workspace/voc-dashboard/app/themes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,37716)),"/workspace/voc-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/voc-dashboard/app/themes/page.tsx"],m="/themes/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/themes/page",pathname:"/themes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},92213:(e,t,s)=>{Promise.resolve().then(s.bind(s,48099))},48099:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(10326),r=s(17577),n=s(25040),o=s(10549),i=s(60387),l=s(33377),d=s(61521),c=s(35047);function m(){let e=n.m,t=(0,c.useRouter)(),{themes:s,reviews:m,dates:u}=e,[x,p]=(0,r.useState)(12),h=(0,r.useMemo)(()=>u.sort((e,t)=>e.date.getTime()-t.date.getTime()).slice(-x).map(e=>e.dateKey),[u,x]),g=(0,r.useMemo)(()=>m.filter(e=>h.includes(e.dateKey)),[m,h]),v=(0,r.useMemo)(()=>{let e=new Map;for(let t of s)e.set(t.themeId,{name:t.name,count:0,sent:0});for(let t of g)for(let s of t.themeIds){let a=e.get(s);a&&(a.count+=1,a.sent+=t.sentimentScore)}return Array.from(e.values()).map(e=>({name:e.name,volume:e.count,sentiment:e.count?Number((e.sent/e.count).toFixed(2)):0}))},[g,s]),f=(0,r.useMemo)(()=>g.slice(-20).reverse(),[g]);return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl p-6 bg-white/60 backdrop-blur border border-slate-200 shadow-soft",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Themes"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Months:"}),a.jsx(d.l,{value:x,onChange:p})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.O,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Theme Volume"}),a.jsx(o.f,{data:v.map(e=>({name:e.name,value:e.volume})),xKey:"name",barKey:"value",color:"#8b5cf6",onBarClick:e=>t.push(`/?brand=${encodeURIComponent(e)}`)})]}),(0,a.jsxs)(i.O,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Theme Sentiment"}),a.jsx(o.f,{data:v.map(e=>({name:e.name,value:e.sentiment})),xKey:"name",barKey:"value",color:"#10b981",onBarClick:e=>t.push(`/?brand=${encodeURIComponent(e)}`)})]})]}),(0,a.jsxs)(i.O,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Theme Composition (Treemap)"}),a.jsx(l.Z,{data:v.map(e=>({name:e.name,value:e.volume}))})]}),(0,a.jsxs)(i.O,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"Recent Quotes"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:f.map(e=>(0,a.jsxs)("div",{className:"kpi",children:[a.jsx("div",{className:"text-sm text-slate-600 mb-2",children:new Date(e.dateKey+"-01").toLocaleDateString(void 0,{month:"short",year:"2-digit"})}),a.jsx("div",{className:"text-slate-800",children:e.text}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-500",children:["Rating: ",e.rating," â€¢ Sentiment: ",e.sentimentScore.toFixed(2)]})]},e.reviewId))})]})]})}},61521:(e,t,s)=>{"use strict";s.d(t,{l:()=>r});var a=s(10326);function r({value:e,onChange:t}){return a.jsx("div",{className:"inline-flex rounded-full bg-slate-100 p-1 border border-slate-200",children:[6,12,18].map(s=>(0,a.jsxs)("button",{onClick:()=>t(s),className:`px-3 py-1.5 text-sm rounded-full transition ${e===s?"bg-white shadow-soft text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:[s," mo"]},s))})}},33377:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(10326),r=s(30660),n=s(90657);function o({data:e,dataKey:t="value"}){return a.jsx("div",{className:"h-80",children:a.jsx(r.h,{width:"100%",height:"100%",children:a.jsx(n.W,{data:e,dataKey:t,stroke:"#fff",fill:"#60a5fa",aspectRatio:4/3,animationDuration:400})})})}},83838:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var a=s(68570);let r=(0,a.createProxy)(String.raw`/workspace/voc-dashboard/app/themes/page.tsx`),{__esModule:n,$$typeof:o}=r;r.default;let i=(0,a.createProxy)(String.raw`/workspace/voc-dashboard/app/themes/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[589,883,657,191],()=>s(51688));module.exports=a})();